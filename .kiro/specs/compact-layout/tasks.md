# 每日信号页面紧凑布局任务清单

## 任务状态

- ✅ 已完成
- 🚧 进行中
- ⏸️ 待开始

## 任务列表

### Phase 1: 紧凑版组件实现 ✅

#### Task 1.1: 实现 render_sell_signals_section_compact() ✅
- [x] 创建函数框架
- [x] 获取持仓数据
- [x] 检查卖出信号
- [x] 使用 metrics 显示统计信息
- [x] 使用 expander 显示信号详情
- [x] 紧急止损信号自动展开

#### Task 1.2: 实现 render_market_status_compact() ✅
- [x] 创建函数框架
- [x] 获取大盘状态
- [x] 使用 success/error 显示状态
- [x] 使用 metric 显示指数和均线

#### Task 1.3: 实现 render_notification_settings_compact() ✅
- [x] 创建函数框架
- [x] 加载通知配置
- [x] 显示当前状态
- [x] 配置面板放在 expander 中
- [x] 保存和测试按钮并排显示

### Phase 2: 布局调整 ✅

#### Task 2.1: 调整 main() 函数布局 ✅
- [x] 创建两列布局（持仓卖出信号 + 大盘状态）
- [x] 创建两列布局（策略配置 + 飞书通知）
- [x] 调整策略参数显示方式
- [x] 使用 caption 显示策略描述
- [x] 参数详情放在 expander 中

### Phase 3: 测试和优化 🚧

#### Task 3.1: 功能测试 ⏸️
- [x] 测试持仓卖出信号显示
- [x] 测试大盘状态显示
- [x] 测试飞书通知配置
- [x] 测试策略选择和参数显示
- [x] 测试信号生成功能

#### Task 3.2: 布局测试 ⏸️
- [x] 在 1920x1080 分辨率下测试
- [x] 在 1366x768 分辨率下测试
- [x] 验证无横向滚动
- [x] 验证关键信息在一屏内可见

#### Task 3.3: 性能测试 ⏸️
- [x] 测试页面加载时间
- [x] 测试布局切换延迟
- [x] 优化数据查询（如需要）

### Phase 4: 文档和清理 ⏸️

#### Task 4.1: 更新文档 ⏸️
- [x] 更新使用说明
- [x] 添加布局说明
- [x] 更新截图（如有）

#### Task 4.2: 代码清理 ⏸️
- [x] 移除未使用的代码
- [x] 优化代码结构
- [x] 添加必要的注释

## 已知问题

### Issue 1: 限价上限数值与官网不一致 🚧

**描述**：
用户反馈生成的股票限价上限数值和当前官网上的数值不一致。

**原因分析**：
1. 系统使用历史收盘价数据（T-1 日或更早）
2. 官网显示的是实时价格或 T 日收盘价
3. 存在数据时效性差异

**可能的解决方案**：
1. 在信号生成时明确标注使用的数据日期
2. 添加数据新鲜度检查和警告
3. 提供手动刷新数据的选项
4. 在限价上限旁边显示数据日期

**优先级**：高

**状态**：待分析

### Issue 2: 信号重复显示 ✅

**描述**：
每日信号页面中，一个一个地显示每支股票和信息汇总表中的信息重复了。

**解决方案**：
移除 `render_signal_table()` 函数调用，只保留 `render_signal_summary_table()`。

**状态**：已解决

## 下一步计划

1. 完成功能测试和布局测试
2. 解决限价上限数值不一致问题
3. 收集用户反馈
4. 根据反馈进行优化

## 备注

- 紧凑版组件已实现，但需要进一步测试
- 布局调整已完成，等待用户反馈
- 限价上限问题需要进一步分析数据源
