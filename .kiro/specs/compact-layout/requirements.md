# 每日信号页面紧凑布局需求

## 背景

当前每日信号页面信息展示较为分散，用户需要上下滚动才能看到所有关键信息。需要优化页面布局，使关键信息更加集中和易于浏览。

## 用户故事

作为量化交易用户，我希望：
- 在一个屏幕内看到所有关键信息（持仓卖出信号、大盘状态、策略配置、通知设置）
- 减少不必要的滚动操作
- 保持信息的清晰度和可读性

## 功能需求

### 1. 紧凑版持仓卖出信号 (render_sell_signals_section_compact)

**需求描述**：
- 使用紧凑的卡片式布局显示持仓卖出信号
- 关键指标使用 metrics 组件展示
- 详细信号内容放在可展开的 expander 中

**验收标准**：
- [ ] 显示持仓数量和卖出信号数量
- [ ] 紧急止损信号自动展开
- [ ] 普通策略卖出信号默认折叠
- [ ] 信号详情包含股票代码、名称、原因、盈亏

### 2. 紧凑版大盘状态 (render_market_status_compact)

**需求描述**：
- 使用 metrics 组件显示沪深300指数和MA均线
- 用颜色区分健康/不健康状态

**验收标准**：
- [ ] 显示沪深300当前价格
- [ ] 显示MA均线对比
- [ ] 健康状态显示绿色成功提示
- [ ] 不健康状态显示红色警告提示

### 3. 紧凑版飞书通知设置 (render_notification_settings_compact)

**需求描述**：
- 显示当前通知状态（已启用/未配置）
- 配置选项放在 expander 中

**验收标准**：
- [ ] 显示当前启用状态
- [ ] 显示脱敏后的 Webhook URL
- [ ] 配置面板默认折叠
- [ ] 保存和测试按钮并排显示

### 4. 两列布局

**需求描述**：
- 使用 Streamlit 的 columns 功能实现两列布局
- 左列：持仓卖出信号 + 大盘状态
- 右列：策略配置 + 飞书通知设置

**验收标准**：
- [ ] 页面使用两列布局
- [ ] 左右列宽度比例合理（建议 1:1 或 2:1）
- [ ] 在标准屏幕分辨率下无需横向滚动
- [ ] 关键信息在一屏内可见

### 5. 策略参数显示优化

**需求描述**：
- 策略描述使用 caption 而非 info box
- 参数详情放在 expander 中
- 使用 metrics 组件显示参数值

**验收标准**：
- [ ] 策略选择下方显示简短描述
- [ ] 参数详情默认折叠
- [ ] 参数使用 metrics 组件展示，清晰易读

## 非功能需求

### 性能
- 页面加载时间不超过 2 秒
- 布局切换无明显延迟

### 兼容性
- 支持常见屏幕分辨率（1920x1080, 1366x768）
- 在较小屏幕上自动调整布局

### 可维护性
- 保持原有功能不变
- 新增紧凑版函数，不删除原有函数
- 代码结构清晰，易于理解

## 约束条件

- 必须使用 Streamlit 原生组件
- 不使用自定义 CSS（除非必要）
- 保持与现有代码风格一致

## 优先级

高优先级 - 用户体验优化的关键功能

## 依赖

- Streamlit 框架
- 现有的信号生成和数据获取模块

## 验收测试

1. 打开每日信号页面
2. 验证所有关键信息在一屏内可见
3. 验证持仓卖出信号、大盘状态、策略配置、通知设置均正常显示
4. 验证 expander 可正常展开/折叠
5. 验证信号生成功能正常工作
